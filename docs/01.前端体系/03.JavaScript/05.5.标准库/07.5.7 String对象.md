---
title: 5.7 String对象
date: 2023-10-12 15:35:05
permalink: /pages/cd0c24/
---
### 1.概述
`String` 对象是 JavaScript 原生提供的三个包装对象之一，用来生成字符串对象。
```javascript
var s1 = 'abc';
var s2 = new String('abc'); //字符串对象：类似数组的对象

typeof s1 // "string"
typeof s2 // "object"

s2.valueOf() // "abc"
```
 除了用作构造函数，String对象还可以当作工具方法使用，将任意类型的值转为字符串。
```javascript
String(true) // "true"
String(5) // "5"
```
### 2.静态方法
#### 2.1 String.fromCharCode()
1. 返回值：这些码点组成的字符串
```javascript
String.fromCharCode() // ""
String.fromCharCode(97) // "a"
String.fromCharCode(104, 101, 108, 108, 111)
// "hello"
```
2. 注意：该方法不支持 Unicode 码点大于0xFFFF的字符，即传入的参数不能大于0xFFFF（即十进制的 65535）
```javascript
String.fromCharCode(0x20BB7)
// "ஷ"
String.fromCharCode(0x20BB7) === String.fromCharCode(0x0BB7)
// true
```
上面代码中，String.fromCharCode参数0x20BB7大于0xFFFF，导致返回结果出错。0x20BB7对应的字符是汉字𠮷，但是返回结果却是另一个字符（码点0x0BB7）。这是因为String.fromCharCode发现参数值大于0xFFFF，就会忽略多出的位（即忽略0x20BB7里面的2）。
这种现象的根本原因在于，码点大于0xFFFF的字符占用四个字节，而 JavaScript 默认支持两个字节的字符。这种情况下，必须把0x20BB7拆成两个字符表示。
```javascript
String.fromCharCode(0xD842, 0xDFB7)
// "𠮷"
```
上面代码中，0x20BB7拆成两个字符0xD842和0xDFB7（即两个两字节字符，合成一个四字节字符），就能得到正确的结果。码点大于0xFFFF的字符的四字节表示法，由 UTF-16 编码方法决定。
### 3.实例属性
#### 3.1 String.prototype.length
1. 返回值：字符串的长度
### 4.实例方法
#### 4.1 String.prototype.charAt()
1. 返回值：指定位置的字符（从0开始）
2. 注意：如果参数为负数，或大于等于字符串的长度，charAt返回空字符串。
#### 4.2 String.prototype.charCodeAt()
1. 返回值：字符串指定位置的 Unicode 码点（十进制表示），相当于String.fromCharCode()的逆操作
```javascript
'abc'.charCodeAt(1) // 98  b的 Unicode 码点是98
'abc'.charCodeAt() // 97  如果没有任何参数，charCodeAt返回首字符的 Unicode 码点

// 如果参数为负数，或大于等于字符串的长度，charCodeAt返回NaN。
'abc'.charCodeAt(-1) // NaN
'abc'.charCodeAt(4) // NaN
```
2. 注意：
charCodeAt方法返回的 Unicode 码点不会大于65536（0xFFFF），也就是说，只返回两个字节的字符的码点。如果遇到码点大于 65536 的字符（四个字节的字符），必须连续使用两次charCodeAt，不仅读入charCodeAt(i)，还要读入charCodeAt(i+1)，将两个值放在一起，才能得到准确的字符。
#### 4.3 String.prototype.concat()
1. 返回值：一个新字符串
2. 是否改变原字符串：否
3. 该方法可以接受多个参数
4. 如果参数不是字符串，concat方法会将其先转为字符串，然后再连接
```javascript
var one = 1;
var two = 2;
var three = '3';

''.concat(one, two, three) // "123"
one + two + three // "33"
```
#### 4.4 String.prototype.slice()
1. 返回值：从原字符串取出子字符串并返回
2. 是否改变原字符串：否
3. [起始位置(从0开始)，终止位置)
4. 负参：倒数计算（倒着数第几个位置）
#### 4.5 String.prototype.substring()
1. 返回值：从原字符串取出子字符串并返回
2. 是否改变原字符串：否
3. 如果第一个参数大于第二个参数，substring方法会自动更换两个参数的位置
4. 负参：substring方法会自动将负数转为0。
#### 4.6 String.prototype.substr()
1. 返回值：从原字符串取出子字符串并返回
2. 是否改变原字符串：否
3. [开始位置（从0开始计算）, 子字符串的长度)
4. 如果第一个参数是负数，表示倒数计算的字符位置。如果第二个参数是负数，将被自动转为0，因此会返回空字符串。 
#### 4.7 String.prototype.indexOf()，String.prototype.lastIndexOf()

#### 4.8 String.prototype.trim()

#### 4.9 String.prototype.toLowerCase()，String.prototype.toUpperCase()

#### 4.10 String.prototype.match()

#### 4.11 String.prototype.search()，String.prototype.replace()

#### 4.12 String.prototype.split()

#### 4.13 String.prototype.localeCompare()

